<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>GraphQLibrarian</title>
    <style>
      body {
        font-family: open sans, arial, sans-serif;
      }
    </style>
  </head>
  <body>
    <h1>Library App</h1>
    <section id="book-list">
      <h3>Available Books</h3>
      <ul>
      </ul>
    </section>

    <script>
      var query = `{
        books {
          title
        }
      }`;

      fetch('http://localhost:4000/graphql', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          query: query
        }),
      }).then(res => res.json()).then(res => {
        var listWrapper = document.getElementById('book-list').getElementsByTagName('ul')[0];
        res.data.books.forEach(book => {
          var listItem = document.createElement('li');
          listItem.innerHTML = book.title;
          listWrapper.appendChild(listItem);
        });
      });
    </script>
  </body>
</html>
